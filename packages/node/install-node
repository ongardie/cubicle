#!/bin/sh

set -e

if [ $# -ne 1 ]; then
  echo "Usage: install-node VERSION"
  echo "See https://nodejs.org/en/about/releases/"
  exit 1
fi

mkdir -p "$HOME/opt/node"
cd "$HOME/opt/node"

if [ -d "$1" ]; then
  echo "node $1 already installed in $HOME/opt/node/"
  exit 0
fi

URL="https://nodejs.org/dist/$1/node-$1-linux-x64.tar.xz"
echo "curl -L $URL"
curl -L $URL | tar -x --xz --strip-components=1 --one-top-level="$1"
touch "$1/.nobck"
